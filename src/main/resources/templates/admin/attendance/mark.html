<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Mark Attendance')}"></head>
<body>
    <div class="app-container">
        <nav th:replace="~{fragments/layout :: admin-sidebar('attendance')}"></nav>
        
        <main class="main-content">
            <header th:replace="~{fragments/layout :: mobile-header('Mark Attendance')}"></header>
            <header th:replace="~{fragments/layout :: top-navbar('Mark Attendance')}"></header>
            
            <div class="page-content">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title" th:text="${subject.subjectName}">Subject</h3>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 4px;" 
                               th:text="${#temporals.format(date, 'EEEE, MMMM dd, yyyy')}">Date</p>
                        </div>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <form th:action="@{/admin/attendance/save}" method="post">
                            <input type="hidden" name="subjectId" th:value="${subject.id}">
                            <input type="hidden" name="date" th:value="${date}">
                            
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Roll No</th>
                                            <th>Student Name</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="attendance : ${attendanceList}">
                                            <td th:text="${attendance.rollNumber}">CS001</td>
                                            <td th:text="${attendance.studentName}">John Doe</td>
                                            <td>
                                                <input type="hidden" name="studentIds" th:value="${attendance.studentId}">
                                                <select name="statuses" class="form-control" style="width: auto; min-width: 120px;">
                                                    <option th:each="status : ${statuses}" th:value="${status}" 
                                                            th:text="${status}" th:selected="${attendance.status == status}">Status</option>
                                                </select>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div style="padding: 20px; display: flex; gap: 12px;">
                                <button type="submit" class="btn btn-primary">Save Attendance</button>
                                <a th:href="@{/admin/attendance}" class="btn btn-secondary">Cancel</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
        
        <nav th:replace="~{fragments/layout :: admin-bottom-nav('attendance')}"></nav>
        <div th:replace="~{fragments/layout :: admin-mobile-menu('attendance')}"></div>
    </div>
    <th:block th:replace="~{fragments/layout :: mobile-script}"></th:block>
</body>
</html>
